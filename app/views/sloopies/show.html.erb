<div class="div-sloopy">
  <h1>Your Sloopy Journey</h1>

  <div class="main-content">
    <div class="map-section">
      <div class="map-container"
           data-controller="map"
           data-map-markers-value="<%= @markers.to_json %>"
           data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>"
           style="width: 100%; height: 400px;">
      </div>
    </div>

    <div class="sloopy-section">
      <div class="sloopy-card">
        <h2>Journey Details</h2>
        <p><strong>From:</strong> <%= @sloopy.origin %></p>
        <p><strong>To:</strong> <%= @sloopy.destination %></p>

        <% if @sloopy.steps.any? %>
          <p class="steps-line">
            <strong>Steps:</strong>
            <span class="city-stops"><%= @sloopy.steps.map(&:city).join(" â†¬ ") %></span>
          </p>
        <% end %>

        <% @sloopy.steps.each do |step| %>
          <div class="step-details">
            <h3><%= step.city %></h3>
            <p><strong>Transport:</strong> <%= step.transport %></p>
            <% if step.activities.any? %>
              <div class="activities">
                <p><strong>Activities:</strong></p>
                <ul>
                  <% step.activities.each do |activity| %>
                    <li><%= activity.name %></li>
                  <% end %>
                </ul>
              </div>
            <% end %>
          </div>
        <% end %>

        <%= link_to "Back to all Sloopies", sloopies_path, class: "btn-sloopy" %>
      </div>
    </div>
  </div>
</div>
